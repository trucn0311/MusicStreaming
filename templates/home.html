<!DOCTYPE html>
<html lang="en">
  {% include 'header.html' %}

  <body>
    <div class="container-fluid text-center fixed">
      <div class="row">
        <div class="col-lg-3 bg-primary-subtle">
          <h2 class="text-uppercase fw-bolder p-2 mt-3 mb-5">Meloplay</h2>

          <!-- ************************************************************************* -->
          <!-- Navigation start  -->
          <nav class="d-flex flex-column align-items-center">
            <a
              class="text-uppercase text-decoration-none text-dark fw-bolder mb-5"
              href="{{ url_for('home') }}"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="25"
                fill="currentColor"
                class="bi bi-house-door"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z"
                /></svg
              >home</a
            >

            <a
              class="text-uppercase text-decoration-none text-dark fw-bolder mb-5 mt-5"
              href="{{ url_for('playlist') }}"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="25"
                fill="currentColor"
                class="bi bi-file-earmark-music"
                viewBox="0 0 16 16"
              >
                <path
                  d="M11 6.64a1 1 0 0 0-1.243-.97l-1 .25A1 1 0 0 0 8 6.89v4.306A2.572 2.572 0 0 0 7 11c-.5 0-.974.134-1.338.377-.36.24-.662.628-.662 1.123s.301.883.662 1.123c.364.243.839.377 1.338.377.5 0 .974-.134 1.338-.377.36-.24.662-.628.662-1.123V8.89l2-.5V6.64z"
                />
                <path
                  d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"
                /></svg
              >playlist</a
            >

            <a
              class="text-uppercase text-decoration-none text-dark fw-bolder mb-5 mt-5"
              href="{{ url_for('account') }}"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="25"
                fill="currentColor"
                class="bi bi-person-circle"
                viewBox="0 0 16 16"
              >
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                <path
                  fill-rule="evenodd"
                  d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
                /></svg
              >account</a
            >
            <a
              class="text-uppercase text-decoration-none text-dark fw-bolder mb-5 mt-5"
              href="{{ url_for('setting') }}"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="25"
                fill="currentColor"
                class="bi bi-gear"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"
                />
                <path
                  d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"
                /></svg
              >setting</a
            >
            <a
              class="btn btn-dark rounded-5 mb-5 mt-3"
              href="{{url_for('logout')}}"
              >Logout</a
            >
          </nav>
          <!-- Navigation end -->
          <!-- ************************************************************************* -->
        </div>
        <div class="d-flex flex-column col-lg-9">
          <div class="d-flex bg-white">
            <div class="me-5 mt-2">
              <h4 class="ms-5">
                Hello
                <span class="user-name fw-semibold text-uppercase"
                  >{{name}}</span
                >
              </h4>
              <p class="ms-5">What music would you like to hear today?</p>
            </div>
            <form class="mt-3 ms-5 ps-5 3" role="search">
              <input
                class="form-control me-5 rounded-5 border border-3"
                type="search"
                placeholder="Search"
                aria-label="Search"
              />
            </form>
          </div>
          <!-- ************************************************************************************** -->
          <!-- ************************************************************************************** -->
          <!-- ************************************************************************************** -->
          <!-- music player section -->
          <div
            class="music-player bg-white row ms-5 border-top border-dark pt-3"
          >
            <img src="static/artist.jpg" class="me-5 col-lg-1" alt="song-img" />
            <!-- ************************************************** -->
            <!-- Song info -->
            <div class="song-info col-lg-2">
              <span id="song-title">Song</span>
              <p id="artist-name">Artist</p>
            </div>
            <!-- ************************************************** -->
            <!-- Song buttons -->
            <div class="play-buttons m-3 col-6">
              <!-- previous button -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="26"
                fill="currentColor"
                class="bi bi-arrow-left"
                id="play-buttons-previous"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"
                />
              </svg>

              <!--Play button -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="26"
                fill="currentColor"
                class="bi bi-play-circle"
                viewBox="0 0 16 16"
                id="play-button"
              >
                <path
                  d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                />
                <path
                  d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"
                />
              </svg>
              <!--Stop button -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="26"
                fill="currentColor"
                class="bi bi-pause-circle"
                viewBox="0 0 16 16"
                id="stop-button"
                style="display: none"
              >
                <path
                  d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                />
                <path
                  d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"
                />
              </svg>

              <!-- next button -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="26"
                fill="currentColor"
                class="bi bi-arrow-right"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"
                />
              </svg>
              <span id="duration"></span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="26"
                fill="currentColor"
                class="bi bi-three-dots"
                id=""
                viewBox="0 0 16 16"
              >
                <path
                  d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"
                />
              </svg>
            </div>
          </div>
          <!-- ************************************************************************************** -->
          <!-- ************************************************************************************** -->
          <!-- ************************************************************************************** -->
          <!-- music player section end -->
        </div>
      </div>
    </div>
    <!-- body-content start ************************************************************************************************************************************************************************ -->
    <div class="fixed bg-white body-content rounded-2 border border-2 ms-5">
      home content goes here
    </div>
    <!--body-content end ****************************************************************************************************************************************************************************************************************** -->
    <!-- ************************************************************************* -->
    <script>
      $(document).ready(function () {
        var audio = new Audio("/play_audio");
        var playing = false;
        var current_time = 0;
        var durationSpan = document.getElementById("duration");
        var artistSpan = document.getElementById("artist-name");

        audio.addEventListener("loadedmetadata", () => {
          const duration = audio.duration;
          const minutes = Math.floor(duration / 60);
          const seconds = Math.floor(duration % 60);

          durationSpan.innerText = `${minutes}:${seconds
            .toString()
            .padStart(2, "0")}`;
        });

        $("#play-button").click(function () {
          if (!playing) {
            audio.currentTime = current_time;
            audio.play();
            playing = true;
            $("#play-button").hide();
            $("#stop-button").show();
          }
        });

        $("#stop-button").click(function () {
          if (playing) {
            audio.pause();
            current_time = audio.currentTime;
            playing = false;
            $("#play-button").show();
            $("#stop-button").hide();
          }
        });
      });
    </script>
    <script src="main.js"></script>
  </body>

  <style>
    h1,
    h2 {
      font-family: "Climate Crisis", cursive;
    }
    .body-content {
      overflow-x: hidden;
      overflow-y: auto;
      position: absolute;
      top: 200px;
      right: 60px;
      height: 100%;
      width: 65%;
    }
    .music-player {
      position: relative;
      width: 90%;
    }
    .play-buttons svg:hover {
      fill: rgb(48, 168, 216);
    }
    .fixed {
      position: fixed;
    }
    .user-name {
      color: cornflowerblue;
    }
  </style>
</html>
